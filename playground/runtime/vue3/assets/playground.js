import{A as f}from"./resetcss.27d2d255.js";import{a as m,_ as h}from"./plugin-vue_export-helper.c146c777.js";const v="modulepreload",g={},w="/tmagic-editor/playground/runtime/vue3/",E=function(s,c){return!c||c.length===0?s():Promise.all(c.map(t=>{if(t=`${w}${t}`,t in g)return;g[t]=!0;const u=t.endsWith(".css"),i=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${i}`))return;const e=document.createElement("link");if(e.rel=u?"stylesheet":v,u||(e.as="script",e.crossOrigin=""),e.href=t,document.head.appendChild(e),u)return new Promise((n,r)=>{e.addEventListener("load",n),e.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>s())};const _=Vue.defineComponent({setup(){const o=Vue.ref(),s=Vue.ref(),c=Vue.ref(),t=Vue.computed(()=>{var i,e,n,r;return((e=(i=o.value)==null?void 0:i.items)==null?void 0:e.find(a=>a.id===s.value))||((r=(n=o.value)==null?void 0:n.items)==null?void 0:r[0])}),u=new f({config:o.value,platform:"editor"});return Vue.provide("app",u),Vue.watch(t,async()=>{await Vue.nextTick();const i=document.querySelector(".magic-ui-page");i&&window.magic.onPageElUpdate(i)}),Vue.onMounted(()=>{var i;(i=window.magic)==null||i.onRuntimeReady({getApp(){return u},updateRootConfig(e){console.log("update config",e),o.value=e,u==null||u.setConfig(e,s.value)},updatePageId(e){console.log("update page id",e),s.value=e,u==null||u.setPage(e)},getSnapElements(){return Array.from(document.querySelectorAll("[class*=magic-ui][id]"))},select(e){console.log("select config",e),c.value=e;const n=document.getElementById(`${e}`);return n||Vue.nextTick().then(()=>document.getElementById(`${e}`))},add({config:e}){var l;if(console.log("add config",e),!o.value)throw new Error("error");if(!c.value)throw new Error("error");const n=m(c.value,[o.value]),r=n.pop(),a=r!=null&&r.items?r:n.pop();if(!a)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");(l=a.items)==null||l.push(e)},update({config:e}){var p;if(console.log("update config",e),!o.value)throw new Error("error");const n=m(e.id,[o.value]),r=n.pop(),a=n.pop();if(!r)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u8282\u70B9");if(!a)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");const l=(p=a.items)==null?void 0:p.findIndex(d=>d.id===r.id);a.items.splice(l,1,Vue.reactive(e))},remove({id:e}){var p;if(!o.value)throw new Error("error");const n=m(e,[o.value]),r=n.pop();if(!r)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u5143\u7D20");const a=n.pop();if(!a)throw new Error("\u672A\u627E\u5230\u7236\u5143\u7D20");const l=(p=a.items)==null?void 0:p.findIndex(d=>d.id===r.id);a.items.splice(l,1)}})}),{pageConfig:t}}});function V(o,s,c,t,u,i){const e=Vue.resolveComponent("magic-ui-page");return o.pageConfig?(Vue.openBlock(),Vue.createBlock(e,{key:0,config:o.pageConfig},null,8,["config"])):Vue.createCommentVNode("",!0)}var y=h(_,[["render",V]]);const A="/tmagic-editor/playground/runtime/vue3/assets/components.js";E(()=>import(A),[]).then(()=>{const o=Vue.createApp(y),{components:s,plugins:c}=window.magicPresetComponents;Object.values(s).forEach(t=>{o.component(t.name,t)}),Object.values(c).forEach(t=>{o.use(t)}),o.mount("#app")});
//# sourceMappingURL=playground.js.map
